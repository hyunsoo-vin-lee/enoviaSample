define("UWA/Element",["UWA/Internal/Deprecate","UWA/Core","UWA/String","UWA/Array","UWA/Utils","UWA/Utils/Client","UWA/Dispatcher","UWA/Json","UWA/Event","vendors/webcomponents/MutationObserver"],function(s,f,a,p,c,o,m,b,u,h){var t=Boolean(typeof MooTools==="object"&&MooTools.version);var j=o.getVendorProperty;var r=document.documentElement;var n=function(w,v){s.warn("new Element(...)","Use Element.create instead");return n.create(w,v)};n.create=(function(){function v(x,w){var z,y;if(x==="iframe"&&w&&w.name!==undefined){z=document.createElement("div");z.innerHTML="<"+x+' name="'+w.name+'"/>';y=z.firstChild;delete w.name}else{if(x==="object"&&w&&w.classid!==undefined){if(w.html){y=document.createElement("div");n.setHTML.call(y,w.html);y=n.getHTML.call(y)}else{y=""}z=document.createElement("div");z.innerHTML="<"+x+' classid="'+w.classid+'">'+y+"</"+x+">";y=z.firstChild;delete w.html;delete w.classid}else{y=document.createElement(x)}}return y}return function(x,w){var y=v(x,w);n.extend(y);if(f.is(w,"object")){n.set.call(y,w)}return y}}());n.extend=(function(){function x(z){var A=z.nodeName==="#document";if(A){s.warn("UWA.extendElement(document)")}for(var y in n){if(!n.hasOwnProperty(y)){continue}if(y==="create"||y==="extend"){continue}if(A&&(y in z)){continue}z[y]=n[y]}}var v={getProperty:window.Element.prototype.getProperty,getSize:function(){var y;if(n.getTagName.call(this)==="body"){y=f.Utils.Client.getSize()}else{y=n.getSize.call(this)}y.x=y.width;y.y=y.height;return y},getCoordinates:function(A){var y=A?this.getPosition(A):this.getOffsets(),z=this.getSize(),B={left:y.x,top:y.y,width:z.x,height:z.y};B.right=B.left+B.width;B.bottom=B.top+B.height;return B}};function w(y){delete y.fireEvent;x(y);f.extend(y,v)}return function(y){if(y&&!y._isUwaExtended){if(t){w(y)}else{x(y)}y._isUwaExtended=true}return y}}());f.createElement=n.create;f.extendElement=n.extend;var e=(function(){var v=document.createElement("div"),w=/(^|,)/g,x=/(?:^|,)\s*[>+~]/;return function(D,z,A,B){var y,F,G,E,C=B||x.test(z);if(C){if(!A){y="* ";F=A}else{F=A.parentNode;E="uwa-private-get-element-selector-root-"+(Math.random()*100000000|0);A.setAttribute(E,"true");y="["+E+"] ";if(!B&&!F){F=n.extend(v).grab(A)}}z=z.replace(w,"$1"+y)}else{F=A}if(B){G=(n[D]||B[D]).call(B,z)}else{G=(n[D]||F[D]).call(F,z)}if(A&&C){A.removeAttribute(E);if(F===v){F.removeChild(A)}}return G}}());function l(x){var w=x?x.indexOf(" "):-1,v;if(w<0){v={name:x}}else{v={name:x.slice(0,w),selector:x.slice(w+1)}}return v}var d=m.extend({Binding:m.Binding.extend({delegates:null,direct:false,element:null,init:function(){this._parent.apply(this,arguments);this.delegates=[]},addDelegate:function(v){if(v){this.delegates.push(v)}else{this.direct=true}},removeDelegate:function(v){if(v){this.delegates=this.delegates.filter(function(w){return w!==v})}else{this.direct=false}if(!this.direct&&!this.delegates.length){this.detach()}},execute:function(A,x){var w,y,z,v;if(this.active){if(this.delegates.length){w=this.delegates.join(",");y=A[0];z=u.getElement(y);while(z&&z!==this.element&&v!==false){if(n.match.call(z,w,this.element)){y._uwaTarget=z;v=this._parent(A,x);y._uwaTarget=null}z=z.parentNode}}if(this.direct&&v!==false){v=this._parent(A,x)}}return v},destroy:function(){this._parent();delete this.element}}),init:function(v){this._parent();this.element=v},addDelegation:function(y,v,x,w){var z=this.add(y,x,w);z.addDelegate(v);z.element=this.element;return z},removeDelegation:function(w,v){if(w){var x=this.bindings[this.indexOfListener(w)];if(x){x.removeDelegate(v)}}else{p.invoke(this.bindings.slice(),"removeDelegate",v)}},dispose:function(){this._parent();delete this.element}});function g(w){var v=typeof w.className==="string"?w.className:w.getAttribute("class");return v?v:""}function q(w,v){if(typeof w.className==="string"){w.className=v}else{w.setAttribute("class",v)}}Object.assign(n,{set:(function(){var v;return function(w,z){var y,A,x=this;if(!v){v={html:n.setHTML,events:n.addEvents,id:function(B){this.id=B},"class":function(B){this.className=B},value:function(B){this.value=B}};["compact","nowrap","ismap","declare","noshade","checked","disabled","readOnly","multiple","selected","noresize","defer","defaultChecked","autofocus","controls","autoplay","loop"].forEach(function(B){v[B.toLowerCase()]=function(C){this[B]=Boolean(C)}})}if(f.is(w,"object")){for(y in w){if(w.hasOwnProperty(y)){n.set.call(x,y,w[y])}}}else{A=n["set"+a.capitalize(w)];if(f.is(A,"function")){A.apply(x,Array.prototype.slice.call(arguments,1))}else{if(!v.hasOwnProperty(w)||v[w].call(x,z)===false){x.setAttribute(w,z)}}}return x}}()),setAttributes:function(v){var w=this,x;for(x in v){if(v.hasOwnProperty(x)){w.setAttribute(x,v[x])}}return w},getTagName:function(){var w=this,v=(w.tagName||w.nodeName);return v?v.toLowerCase():""},setText:function(w){var v=this;n.empty.call(v);return n.appendText.call(v,w)},appendText:function(x){var w=this,v=n.getDocument.call(w);w.appendChild(v.createTextNode(x));return w},getText:function(){var v=this;if(typeof v.textContent==="string"){return v.textContent}if(typeof v.innerText==="string"){return v.innerText}return""},setContent:function(){var v=this;n.empty.call(v);return n.addContent.apply(v,arguments)},addContent:(function(){function v(z,w,y){var B,x,A,C;if(f.is(z,"nodelist")){z=[].slice.call(z)}for(B=0,x=z.length;B<x;B++){C=z[B];if(C){if(C.nodeType){y.appendChild(C)}else{if(typeof C==="string"||typeof C==="number"){if(/<|&#?\w+;/.test(C)){A=w.createElement("div");n.setHTML.call(A,C);while(A.firstChild){y.appendChild(A.firstChild)}}else{y.appendChild(w.createTextNode(C))}}else{if(typeof C.inject==="function"&&!Array.isArray(C)){C.inject(y)}else{if(typeof C.length==="number"){v(C,w,y)}else{if(typeof C==="object"){A=C.tag||"div";delete C.tag;y.appendChild(n.create(A,C));C.tag=A}else{y.appendChild(w.createTextNode(C))}}}}}}}}return function(){var y=this,w=n.getDocument.call(y),x=w.createDocumentFragment();v(arguments,w,x);y.appendChild(x);return y}}()),setHTML:function(y){var z,x=this;if(typeof y!=="string"){n.setContent.call(x,y)}else{try{z=a.escapeHTMLEntities(y).replace('<?xml version="1.0" encoding="UTF-8"?>',"").replace(/&(?!#?[a-z0-9]+;)/gi,"&#38;");x.innerHTML=z}catch(v){f.log("UWA.Element.setHTML error cause: "+v+' with HTML value "'+y+'"');try{x.innerHTML=a.stripTags(String(y))}catch(w){n.setText.call(x,y)}}}return x},getHTML:function(){var v=this.innerHTML;if(o.Engine.ie){v=v.replace(/< *(\/ *)?(\w+)/g,function(w){return w.toLowerCase()})}return v},inject:function(y,w){var z,x=this,v=n.getDocument.call(x);w=w||"bottom";if(w==="bottom"){y.appendChild(x)}else{if(w==="top"){y.insertBefore(x,y.firstChild)}else{z=y.parentNode;if(!z&&y.nodeType!==11){z=v.createDocumentFragment();z.appendChild(y)}if(z){if(w==="after"){if(z.lastChild===y){z.appendChild(x)}else{z.insertBefore(x,y.nextSibling)}}else{if(w==="before"){z.insertBefore(x,y)}}}}}return x},grab:function(w,v){n.inject.call(w,this,v);return this},isInjected:(function(){var v;if(r.contains){v=function(x){var w=this;x=x||w.ownerDocument.documentElement;return x!==w&&(x.contains?x.contains(w):true)}}else{if(r.compareDocumentPosition){v=function(x){var w=this;x=x||w.ownerDocument.documentElement;return Boolean(x.compareDocumentPosition(w)&16)}}else{v=function(x){var w=this;x=x||w.ownerDocument.documentElement;do{w=w.parentNode}while(w&&w.parentNode);return w===x}}}return v}()),empty:function(w){var x,v=this;while(v.firstChild){x=v.firstChild;if(w){n.destroy.call(x)}else{v.removeChild(x)}}return v},remove:function(){var w=this,v=n.getParent.call(w);if(v){v.removeChild(w)}return w},destroy:function(){var w,B,x,A=this,v=n.remove,z=n.destroy,y=n.getChildren.call(A);for(B=0,x=y.length;B<x;B+=1){if(y[B].destroy){z.call(y[B])}}n.removeEvents.call(A);w=n.getDocument.call(A);if(A!==w&&A!==w.documentElement&&A!==w.body&&A!==n.getWindow.call(A)){v.call(A)}},getParent:function(v){var w=this.parentNode;if(v){while(w&&w.nodeType===1&&!n.match.call(w,v)){w=w.parentNode}}if(w&&w.nodeType!==1){w=null}return w?n.extend(w):null},getParents:function(w){var v=[];var y=this;while(true){var x=y.getParent(w);if(x){v.push(x);y=x}else{return v}}},getClosest:function(v){var w=this;return n.match.call(w,v)?w:n.getParent.call(w,v)},getChildren:function(){return Array.prototype.filter.call(this.childNodes,function(v){return v.nodeType===1}).map(n.extend)},getDocument:function(){var v=this;return v.nodeType===9?v:(v.ownerDocument||v.document)},getWindow:function(){var v=n.getDocument.call(this);return v&&(v.defaultView||v.parentWindow)},getOffsetParent:(function(){var w;function y(){var A=document.createElement("div"),B=document.createElement("div");A.style.height="0";A.appendChild(B);w=(B.offsetParent===A)}function v(A){return(/^(?:body|html)$/i).test(A.tagName)}function z(A){return A&&(n.getStyle.call(A,"position")!=="static"||v(A))}function x(A){return z(A)||(/^(?:table|td|th)$/i).test(A.tagName)}return function(){var E,B=this,A=n.getDocument.call(B),D=B.offsetParent||(A&&A.body),C=n.getStyle.call(B,"position");if(!v(B)&&C!=="fixed"){if(w===undefined){y()}if(w){E=(C==="static")?x:z;while((B=B.parentNode)!==undefined){if(E(B)){D=B;break}}}else{try{D=B.offsetParent}catch(F){}}}if(D){D=n.extend(D)}return D}}()),getElements:function(v){return Array.prototype.map.call(e("querySelectorAll",v,this),n.extend,f)},getElement:function(v){return n.extend(e("querySelector",v,this))},match:function(v,w){return e("matchesSelector",v,w,this)},hasClassName:function(v){var w=g(this);return Boolean(w&&a.contains(w,v," "))},addClassName:function(w){var v=this;if(!n.hasClassName.call(v,w)){q(this,(g(this).trim()+" "+w).trim())}return v},removeClassName:function(w){var v=this;q(this,g(this).replace(new RegExp("(^|\\s)"+w+"(?:\\s|$)"),"$1").trim());return v},toggleClassName:function(w,x){var v=this,y=f.is(x)?x:!n.hasClassName.call(v,w);return f.Element[y?"addClassName":"removeClassName"].call(v,w)},setStyle:function(x,w){var v={};v[x]=w;return n.setStyles.call(this,v)},setStyles:(function(){var v={},A={none:"",firefox:"-moz-",opera:"-o-",trident:"-ms-",webkit:"-webkit-"},x={columnCount:1,flex:1,flexGrow:1,flexShrink:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,widows:1,zIndex:1,zoom:1,fillOpacity:1,strokeOpacity:1};function z(B){var C=[],D=B.replace(/['"]/g,"").split(",");D.forEach(function(E){C.push('"'+E.trim()+'"')});return C.join(", ")}function w(B,J){var C,H,F,I,E,D,G=B+J;if(v[G]){C=v[G]}else{C=false;E=document.createElement("div");D=E.style;for(H in A){F=A[H];I=F+J;D[B]=I;if(D[B]===I&&(I!==""&&!o.Engine.ie)){C=I;break}}v[G]=C}return C}function y(C){var B=w("cursor",C);if(B!==false){C=B}else{if(o.Engine.opera){C="move"}else{C="url("+f.hosts.uwa+f.paths.css+"/base/cursor/"+(C==="grabbing"?"closedhand":"openhand")+".cur)"+(o.Engine.ie?"":" 4 4")+", move"}}return C}return function(J){var C,B,H,I,D=this,F=D.style,G=[];for(I in J){if(J.hasOwnProperty(I)){H=J[I];I=a.camelCase(I);if(I==="opacity"){n.setOpacity.call(D,H)}else{if(H!==""&&H!==null&&isFinite(H)&&x[I]===undefined){H+="px"}else{if(H==="none"&&I==="userSelect"&&F.MozUserSelect!==undefined){H="-moz-none"}else{if(I==="fontFamily"){H=z(H)}else{if(I==="cursor"){if("grabbing"===H||"grab"===H){H=y(H,F)}}}}}G.push({name:n.getStyleName.call(D,I),value:H})}}}for(C=0,B=G.length;C<B;C++){I=G[C].name;H=G[C].value;try{F[I]=H||H===0?H:""}catch(E){f.log('Unable to set style "'+I+'" with value "'+H+'"')}}return D}}()),getStyle:function(x,w){var v=n.getStyles.call(this,[x],w);return v[x]},getStyles:(function(){var v,x,A,y=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,B=/^margin/;function z(){var C=document.createElement("div");C.style.margin="1%";document.body.appendChild(C);x=(window.getComputedStyle(C,null)||{marginTop:0}).marginTop==="1%";document.body.removeChild(C)}if(document.defaultView&&document.defaultView.getComputedStyle){v=function(F,J,N){var G,E,D,M,L,H,O=F.ownerDocument,I=O.defaultView,K=n.getWindow.call(F).getComputedStyle(F,null),C=F.style;if(I&&K){for(G=0,E=J.length;G<E;G++){M=J[G];H=n.getStyleName.call(F,M);L=K[H];if((L===""||L==="auto")&&!n.isInjected.call(F,O.documentElement)){L=C[H]}if(x===undefined){z()}if(x&&B.test(H)&&y.test(L)){D=C.width;C.width=L;L=K.width;C.width=D}N[M]=L!==undefined?L:(C[M]||"")}}return N}}else{if(document.documentElement.currentStyle){v=function(G,K,O){var H,F,E,N,M,J,I,D=G.currentStyle,L=G.runtimeStyle,C=G.style;for(H=0,F=K.length;H<F;H++){N=K[H];I=n.getStyleName.call(G,N);M=D&&D[I];if(y.test(M)){E=C.left;J=L&&L.left;if(J){L.left=D.left}C.left=I==="fontSize"?"1em":(M||0);M=C.pixelLeft+"px";C.left=E;if(J){L.left=J}}O[N]=M!==undefined?M:(G.style[N]||"")}return O}}}function w(G,F,D){var E,C,I,H=G.style;for(E=0,C=F.length;E<C;E++){I=F[E];D[I]=H[I]||""}return D}return function(E,F){var C={},D=this;if(E.indexOf("opacity")!==-1&&!A){A=true;C.opacity=n.getOpacity.call(D,F);E.splice(E.indexOf("opacity"),1);A=false}if(F===false){C=w(D,E,C)}else{C=v(D,E,C)}return C}}()),getStyleName:(function(){function x(z){return z.join(".")}var w=o.Engine,y=w.name,v=["box-sizing","box-shadow","transform","transform-style","transition","transition-timing-function","transition-duration","transition-delay","transition-property","border-image","border-radius","text-stroke","font-smoothing","text-fillcolor","text-shadow","perspective","appearance","touch-callout","overflow-scrolling","mask","user-select"];return c.memoize(function(E,A){var z,C,B,F=[],D={firefox:"-moz",opera:"-o",ie:(A?"-ms":"ms"),chrome:"-webkit",safari:"-webkit"};if(typeof E==="string"){E=a.unCamelCase(E);if(E==="float"){z=w.ie?"style-float":"css-float"}else{if(v.indexOf(E)!==-1){if(D[y]){B=D[y];z=B+"-"+E;F.push(z)}else{for(C in D){if(D.hasOwnProperty(C)){B=D[C];z=(B+"-"+E);if(F.indexOf(z)===-1){F.push(z)}}}}F=F.filter(function(G){return r.style[a.camelCase(G)]!==undefined});if(F.length===0){z=E}else{z=F.shift()}}else{z=E}}if(!A){z=a.camelCase(z)}}else{z=E}return z},x)}()),getOpacity:(function(){var y=function(){},x=o.Features.opacityCSS,v=o.Features.filterCSS,w=/alpha\(opacity=([\d.]+)\)/i;if(v&&!x){y=function(B,C){var A,z=1;A=n.getStyle.call(B,"filter",C).replace(/ /g,"").match(w);if(A){z=A[1]/100}return z}}else{if(x){y=function(B,D){var A=1,C=B.style,z=n.getStyle;if(C.opacity!==undefined){A=z.call(B,"opacity",D)}else{if(C.MozOpacity!==undefined){A=z.call(B,"MozOpacity",D)}}return parseFloat(Math.round(A*100)/100,10)}}}return function(z){return y(this,z)}}()),setOpacity:(function(){var x=function(){},w=o.Features.opacityCSS,v=o.Features.filterCSS;if(v&&!w){x=function(A,B,y){var z;B.zoom=1;y=y===1?"":"alpha(opacity="+y*100+")";B.MsFilter=y;B.filter=y;z=B.display;B.display="none";A.offsetHeight;B.display=z}}else{if(w){x=function(z,A,y){if(A.opacity!==undefined){A.opacity=y}else{if(A.MozOpacity!==undefined){A.MozOpacity=y}}}}}return function(y){var z=this,A=z.style;if(y!==null){y=parseFloat(y,10);y=y>1?1:(y<0.00001?0:y)}x(z,A,y);return z}}()),hide:function(){return n.setStyle.call(this,"display","none")},show:(function(){var x,y,w;function v(z){return n.getStyle.call(z,"display")}w=c.memoize(function(D){var C,B=document,z=B.body,A=B.createElement(D);z.appendChild(A);C=v(A);z.removeChild(A);if(C==="none"||C===""){if(!x){x=B.createElement("iframe");x.frameBorder=x.width=x.height=0}z.appendChild(x);if(!y||!x.createElement){y=(x.contentWindow||x.contentDocument).document;y.write((B.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");y.close()}A=y.createElement(D);y.body.appendChild(A);C=v(A);z.removeChild(x)}return C});return function(){var A,z=this;if(z.style){A=z.style.display;if(A==="none"){A=z.style.display=""}if(A===""){z.style.display=(v(z)==="none"&&w(z.nodeName))||""}}return z}}()),toggle:function(x){var w=this,v=f.is(x)?x:n.isHidden.call(w);return f.Element[v?"show":"hide"].call(w)},isHidden:function(){return n.getStyle.call(this,"display")==="none"},setTranslate:(function(){var v=(function(){var w;if(o.Features.transitionsCSS){if(o.Features.matrixCSS){w=function(A,z){return{transform:"translate3d("+z+"px,"+A+"px, 0)"}}}else{w=function(A,z){return{transform:"translate("+z+"px,"+A+"px)"}}}}else{w=function(A,z){return{top:A,left:z}}}return w}());return function(B,w){var A,z=this;B=B||0;w=w||0;A=v(B,w);n.setStyles.call(z,A);return z}}()),getComputedSize:(function(){var v={borderWidth:["borderLeftWidth","borderRightWidth"],borderHeight:["borderBottomWidth","borderTopWidth"],paddingWidth:["paddingLeft","paddingRight"],paddingHeight:["paddingTop","paddingBottom"],marginWidth:["marginLeft","marginRight"],marginHeight:["marginTop","marginBottom"],innerWidth:["borderWidth","paddingWidth"],innerHeight:["borderHeight","paddingHeight"],outerWidth:["marginWidth"],outerHeight:["marginHeight"]};return function(){var B,x,C,y,A=this,z=c.toArray(arguments),w=0;for(B=0;B<z.length;B++){C=a.camelCase(z[B]);if(v[C]){z.splice(B,1);z=z.concat(v[C]);B--}else{z.splice(B,1,C)}}y=n.getStyles.call(A,z);for(B=0,x=z.length;B<x;B++){C=z[B];w+=parseFloat(y[C],10)||0}return w}}()),getScrolls:(function(){var v;function w(){var y=document.createElement("div"),x=document.createElement("div");x.style.visibility="hidden";x.style.overflow="hidden";x.style.width="1px";y.style.overflow="visible";y.innerHTML="x";x.appendChild(y);r.appendChild(x);v=y.scrollWidth===1;r.removeChild(x)}return function(){var z,y,A,x=this;if(f.is(x,["window","document"])){y=o.getScrolls()}else{A=x.style;y={width:x.scrollWidth,height:x.scrollHeight,top:x.scrollTop,left:x.scrollLeft};if(v===undefined){w()}if(v&&["","visible"].indexOf(n.getStyle.call(x,"overflow"))!==-1){z=A.overflow;A.overflow="hidden";y.width=x.scrollWidth;A.overflow=z}}return y}}()),getOffsets:(function(){var F,E=/^t(?:able|d|h)$/i,A,B,w,C,z;function v(G){var H=G.ownerDocument.defaultView;return H?H.getComputedStyle(G,null):G.currentStyle}function y(G,H){return n.getStyle.call(G,H)}function D(){var I,L,H,K=document.body,M=parseInt(y(K,"marginTop"),10),J=document.createElement("div"),G="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";J.innerHTML=G;K.insertBefore(J,K.firstChild);I=J.firstChild;L=I.firstChild;H=I.nextSibling.firstChild.firstChild;A=(L.offsetTop!==5);B=(H.offsetTop===5);L.style.position="fixed";L.style.top="20px";w=(L.offsetTop===20||L.offsetTop===15);L.style.position=L.style.top="";I.style.overflow="hidden";I.style.position="relative";C=(L.offsetTop===-5);z=(K.offsetTop!==M);K.removeChild(J)}function x(H){var I=H.offsetTop,G=H.offsetLeft;if(A===undefined){D()}if(z){I+=parseFloat(y(H,"marginTop"))||0;G+=parseFloat(y(H,"marginLeft"))||0}return{x:G,y:I}}if(document.documentElement.getBoundingClientRect!==undefined){F=function(){if(this===this.ownerDocument.body){return x(this)}var R,O,G,N,J,I,M,Q,H=this,L=n.getWindow.call(H),P=L.webkitConvertPointFromNodeToPage;if(H.getBoundingClientRect){N=n.getDocument.call(H);J=N.body;I=r.clientTop||J.clientTop||0;M=r.clientLeft||J.clientLeft||0;Q=o.getScrolls();try{G=H.getBoundingClientRect()}catch(K){}if(!G||!n.isInjected.call(H,r)){R=G?G.left:0;O=G?G.top:0}else{R=G.left+Q.x-I;O=G.top+Q.y-M}}else{if(P){G=P(H,new L.WebKitPoint(0,0));R=G.x;O=G.y}}return{x:R,y:O}}}else{F=function(){if(this===this.ownerDocument.body){return x(this)}var I,J=this,M=J.offsetParent,H=n.getDocument.call(J),L=H.body,K=v(J),N=J.offsetTop,G=J.offsetLeft;if(A===undefined){D()}J=J.parentNode;while(J&&J!==L&&J!==r&&J.nodeType!==11){if(w&&K.position==="fixed"){break}I=v(J);G-=J.scrollLeft;N-=J.scrollTop;if(J===M){G+=J.offsetLeft;N+=J.offsetTop;if(A&&!(B&&E.test(J.nodeName))){G+=parseFloat(I.borderLeftWidth)||0;N+=parseFloat(I.borderTopWidth)||0}M=J.offsetParent}if(C&&I.overflow!=="visible"){G+=parseFloat(I.borderLeftWidth)||0;N+=parseFloat(I.borderTopWidth)||0}K=I;J=J.parentNode}if(K.position==="relative"||K.position==="static"){G+=L.offsetLeft;N+=L.offsetTop}if(w&&K.position==="fixed"){G+=Math.max(r.scrollLeft,L.scrollLeft);N+=Math.max(r.scrollTop,L.scrollTop)}return{x:G,y:N}}}return F}()),getPosition:function(x,C){var w,L,B,y,z,G,D,F=/^(?:body|html)$/i,A=this,E=n.getOffsetParent,K=n.getOffsets,H=n.getComputedSize,J=n.getSize,v=n.isInjected,I={x:0,y:0};x=x||E.call(A);if(!x||!v.call(A)){return I}D=K.call(A);if(x!==n.getDocument.call(A)){w=F.test(x.nodeName)?I:K.call(x);D.x-=parseFloat(H.call(A,"marginLeft"))||0;D.y-=parseFloat(H.call(A,"marginTop"))||0;w.x+=parseFloat(H.call(x,"borderLeftWidth"))||0;w.y+=parseFloat(H.call(x,"borderTopWidth"))||0;D.x-=w.x;D.y-=w.y;G=f.typeOf(C);if(G){if(G==="string"){C={x:C,y:C}}L=J.call(A);for(B=0;B<2;B+=1){y=B?"x":"y";z=B?"width":"height";if(C[y]==="center"){D[y]+=L[z]/2}else{if((B===1&&C[y]==="right")||(B===0&&C[y]==="bottom")){D[y]+=L[z]}}}}}return D},setPosition:(function(){function w(B,y,A,D,C){var z,x;switch(f.typeOf(D)){case false:break;case"object":x={x:D.x+A.x,y:D.y+A.y,width:D.width,height:D.height};break;case"element":z=D;break;default:z=n.getOffsetParent.call(B);while(z&&z!==y&&z.nodeType===1){if(n.getStyle.call(z,"overflow")!=="visible"){break}z=z.parentNode}if(!z||z.nodeType!==1){z=y}}if(z){if(z===y){x=f.merge(o.getScrolls(),o.getSize())}else{x=n.getOffsets.call(z);x.width=z.offsetWidth;x.height=z.offsetHeight}}if(x){x.x+=C;x.y+=C;x.width-=2*C;x.height-=2*C}return x}var v={full:function(A,y){var x=n.getSize.call(this);var B=A.x+A.width-y.x-x.width;var z=A.y+A.height-y.y-x.height;if(B<0){y.x=Math.max(0,y.x+B)}if(z<0){y.y+=z}},"resize-max":function(y,x){n.setStyles.call(this,{maxWidth:y.x+y.width-x.x,maxHeight:y.y+y.height-x.y})},none:function(){}};return function(B,F){F=F||{};var D,E,A=this,C=n.getDocument.call(A).body,x=n.getOffsetParent.call(A)||C,y=n.getOffsets.call(x),z=n.getOffsets.call(F.relative||x);D=w(A,C,z,F.boundary,F.boundaryMargin||0);if(typeof B.length==="number"){E=n.getSize.call(A);c.splat(B).forEach(function(H){var G=z.x+H.x,I=z.y+H.y;H.score=(Math.min(D.x+D.width,G+E.width)-Math.max(D.x,G))*(Math.min(D.y+D.height,I+E.height)-Math.max(D.y,I))});B.sort(function(H,G){return G.score-H.score});B=B[0]}B={x:B.x+z.x,y:B.y+z.y};if(D){if(!F.fit){F.fit=v.full}else{if(typeof F.fit==="string"&&f.owns(v,F.fit)){F.fit=v[F.fit]}}B.x=Math.max(D.x,Math.min(B.x,D.x+D.width));B.y=Math.max(D.y,Math.min(B.y,D.y+D.height));F.fit.call(this,D,B)}n.setStyles.call(A,{top:B.y-y.y,left:B.x-y.x});return A}}()),getSize:function(){var C,z,B,A,w,v,y,x=this;if(f.is(x,["window","document"])){y=o.getSize()}else{v=n.getStyle.bind(x);B=x.style;A=x.offsetWidth;w=x.offsetHeight;if(v("display")==="none"&&A===0&&w===0){z=B.display;C=B.visibility;B.visibility="visible";B.display="block";A=x.offsetWidth;w=x.offsetHeight;B.display=z;B.visibility=C}y={width:A,height:w}}return y},getDimensions:function(){var z,x=this,w=n.getSize.call(x),y=w.width,v=w.height,A=n.getStyles.call(x,["maxWidth","maxHeight","minWidth","minHeight","borderLeftWidth","borderRightWidth","paddingLeft","paddingRight","borderBottomWidth","borderTopWidth","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);for(z in A){A[z]=parseFloat(A[z],10)||0}return{width:y,height:v,maxWidth:A.maxWidth||-1,maxHeight:A.maxHeight||-1,minWidth:A.minWidth||-1,minHeight:A.minHeight||-1,innerWidth:y-(A.borderLeftWidth+A.borderRightWidth+A.paddingLeft+A.paddingRight),innerHeight:v-(A.borderBottomWidth+A.borderTopWidth+A.paddingTop+A.paddingBottom),outerWidth:y+A.marginLeft+A.marginRight,outerHeight:v+A.marginTop+A.marginBottom}},isInViewport:function(P,O,N,A){var y=this,H=n.getOffsets,I=H.call(P),G=H.call(y),B=P.offsetHeight,M=P.offsetWidth,L=y.offsetWidth,K=y.offsetHeight,J=G.y,E=G.x,F=J+y.offsetHeight,Q=E+y.offsetWidth,z,D,x,w,v,C;if(O){w=E<(I.x+M)&&(E+L)>I.x;v=J<(I.y+B)&&(J+K)>I.y}else{w=E>=I.x&&(E+L)<=(I.x+M);v=J>=I.y&&(J+K)<=(I.y+B)}C=(A==="x")?w:(A==="y")?v:w&&v;if(N){z=o.getScrolls();D=o.getSize();x={top:z.y,bottom:z.y+D.height,right:z.x+D.width,left:z.x};C=C&&(J<x.bottom&&E<x.right&&F>x.top&&Q>x.left)}return C},setData:function(x,z){var A,w=this,v=f.typeOf(z),y=f.typeOf(x);if(y==="string"&&v){z=b.encode(z);if(w.dataset){w.dataset[a.camelCase(x)]=z}else{x="data-"+a.unCamelCase(x);if(w.setAttribute){w.setAttribute(x,z)}else{w[x]=z}}}else{if(y==="object"&&!v){for(A in x){if(x.hasOwnProperty(A)){n.setData.call(w,A,x[A])}}}}return w},getData:function(w){var x,v=this;if(f.is(w,"string")){if(v.dataset){x=v.dataset[a.camelCase(w)]}else{w="data-"+a.unCamelCase(w);if(v.getAttribute){x=v.getAttribute(w,x)}else{x=v[w]=x}}}return f.is(x)?b.decode(x):undefined},removeData:function(w){var v=this;if(f.is(w,"string")){if(v.dataset){if(v.dataset.hasOwnProperty(a.camelCase(w))){delete v.dataset[a.camelCase(w)]}}else{w="data-"+a.unCamelCase(w);if(v.removeAttribute){v.removeAttribute(w)}else{v[w]=null}}}return v},handleExternalLinks:function(w){var v=this;n.addEvent.call(v,"click",function(z){if(!u.isDefaultPrevented(z)&&!u.whichKey(z)){var x,y=u.getElement(z),A=String(window.location).split("#")[0];while(y&&!x){x=(n.getTagName.call(y)==="a"&&y.getAttribute("href"))||n.getData.call(y,"href");y=n.getParent.call(y)}if(x&&x.indexOf(A+"#")!==0&&x.indexOf("#")!==0&&x.indexOf("javascript")!==0){w(x);u.stop(z)}}});return v},addEvent:(function(){function v(y,w,D,x){if(f.is(y,"window")&&w==="resize"){D=true}var A,F,E=y._events||{},B=!D?n.Events[w]:false,z=B?w+"Custom":w,C=E[z];if(!C){F=new d(y);E[z]=C={dispatcher:F,handleEvent:function(H){if(t){var G=window.DOMEvent||window.Event;H=new G(H);["offsetY","offsetX","relatedTarget","button","metaKey","altKey","shiftKey","ctrlKey","clientY","clientX","screenY","screenX","which","pageY","pageX","layerY","layerX","charCode","keyCode","timeStamp","cancelable","bubbles","target","type","detail","wheelDelta","touches","changedTouches"].forEach(function(I){if(!f.owns(H,I)){H[I]=H.event[I]}})}if(H.timeStamp===undefined){H.timeStamp=Date.now()}F.dispatch([H])},events:{},bindings:[],timers:[]};A=C.handleEvent;y._events=E;if(B){B(C,y,{target:y,type:w})}else{if(y.addEventListener){y.addEventListener(w,A,x||false)}else{y.attachEvent("on"+w,A);window.attachEvent("onunload",function(){y.detachEvent("on"+w,A)})}}}return C}return function(B,C,A,y,w){B=l(B);var x=this,z=(C&&typeof C.handleEvent==="function")?C:x,D=v(this,B.name,A,w);D.dispatcher.addDelegation(C,B.selector,z,y);if(B.name==="load"&&x.tagName&&x.tagName.toLowerCase()==="img"&&x.complete&&x.width>0){D.dispatcher.dispatch()}return x}}()),addEvents:function(y,A,x,v){var z,w=this;for(z in y){if(y.hasOwnProperty(z)){n.addEvent.call(w,z,y[z],A,x,v)}}return w},triggerEvent:function(v){var x=this,w=x._events||{},y=w[v],z={target:x,timeStamp:Date.now(),type:v};if(y){y.handleEvent(z)}return x},removeEvent:function(v,x,w){if(!f.is(v)){return n.removeEvents.call(this)}v=l(v);var B,z,E,G,F,A=this,y=(A._events&&A._events[v.name+"Custom"]),C=y?v.name+"Custom":v.name,D=A._events&&A._events[C];if(D){G=D.dispatcher;if(!x&&!v.selector){G.removeAll()}else{G.removeDelegation(x,v.selector)}if(G.getNumListeners()===0){delete A._events[C];F=D.events;for(E in F){if(F.hasOwnProperty(E)){n.removeEvent.call(A,E,F[E])}}if(D.timers){for(B=0,z=D.timers.length;B<z;B++){clearTimeout(D.timers[B])}}if(D.bindings){for(B=0,z=D.bindings.length;B<z;B++){D.bindings[B].dispose()}}if(!y){if(A.removeEventListener){A.removeEventListener(C,D.handleEvent,w)}else{A.detachEvent("on"+C,D.handleEvent)}}G.dispose()}}return A},removeEvents:function(y,v){var z,x=this,w=typeof y!=="undefined",A=w?y:x._events;for(z in A){if(A.hasOwnProperty(z)){n.removeEvent.call(x,z,w?y[z]:null,v)}}return x},fillParent:function(B,v){B=B||"height";var w=this,y=v||n.getParent.call(w),A=n.setStyle.bind(w),z=a.ucfirst(B),x=10000;if(y){A("height",x+"px");A("height",(y["offset"+z]-y["scroll"+z]+x)+"px")}return w},setSelectable:(function(){function v(w){u.preventDefault(w)}return function(w){var x=this;x.setAttribute("unselectable",w?"off":"on");n.setStyles.call(x,{userSelect:w?"":"none",touchCallout:w?"":"none"});n[w?"removeEvent":"addEvent"].call(x,"selectstart",v);return x}}()),requestFullscreen:(function(){var v=j(r,"requestFullscreen")||j(r,"requestFullScreen");return v?function(){return v.call(this,1)}:function(){throw new Error("Element#requestFullscreen is not available in this platform")}}())});function k(v,w){if(typeof w==="function"){w=w()}else{if(w===undefined){w=j(r,"on{}"+v,true);if(w){w=w.slice(2)}}}if(v===w){return}n.Events[v]=function(x,y){if(!w){throw new Error("The event "+v+" is not supported on this platform")}n.addEvent.call(y,w,x.handleEvent,true);x.events[w]=x.handleEvent}}n.Events={mouseleave:(function(){function v(x,y){var w=false;if(x!==y){while(y&&y!==x){y=y.parentNode}w=x===y}return w}return function(w,y,z){var x=w.handleEvent;if(y.addEventListener){w.handleEvent=function(B){var A=B.relatedTarget;if(this!==A&&!v(this,A)){x.call(this,z)}};n.addEvent.call(y,"mouseout",w.handleEvent);w.events.mouseout=w.handleEvent}else{n.addEvent.call(y,"mouseleave",x,true);w.events.onmouseleave=x}}}()),mouseenter:(function(){function v(x,y){var w=false;if(x!==y){while(y&&y!==x){y=y.parentNode}w=x===y}return w}return function(w,y,z){var x=w.handleEvent;if(y.addEventListener){w.handleEvent=function(B){var A=B.relatedTarget;if(this!==A&&!v(this,A)){x.call(this,z)}};n.addEvent.call(y,"mouseover",w.handleEvent);w.events.mouseover=w.handleEvent}else{n.addEvent.call(y,"mouseenter",x,true);w.events.mouseenter=x}}}()),mousewheel:function(v,y){var x=v.handleEvent,w=o.Engine.firefox?"DOMMouseScroll":"mousewheel";v.handleEvent=function(z){z=z||window.event;z.wheel=(z.wheelDelta)?z.wheelDelta/120:-(z.detail||0)/3;x(z)};n.addEvent.call(y,w,v.handleEvent,true);v.events[w]=v.handleEvent},update:function(v,x,y){var w=new h(function(A){var z=A[0];v.handleEvent(Object.assign(y,{record:z}))});w.observe(x,{childList:true,subtree:true})},resize:(function(){var z,w=new m(),v=200;function y(B){var A;if(f.is(B,["window","document"])){A=o.getSize();A=[A.width,A.height,0,0]}else{A=[B.scrollWidth,B.scrollHeight,B.offsetWidth,B.offsetHeight]}return A.join("x")}function x(){clearTimeout(z);w.dispatch();if(w.getNumListeners()>0){z=setTimeout(x,v)}}return function(B,E,G){var A,D=220,C=y(E),F="orientationchange";if(B.bindings.length>0){return}B.timers=[A];if(window===E&&f.is(window[F])){n.addEvent.call(E,F,x);B.events[F]=x}B.bindings=[w.add(function(){var I=y(E);var H=f.is(E,["window","document"])||n.isInjected.call(E);if(C!==I&&H){C=I;clearTimeout(A);A=setTimeout(function(){B.handleEvent(G)},D)}})];x()}}())};k("fullscreenchange");k("fullscreenerror");k("transitionEnd",function(){var x,v=document.createElement("fakeelement"),w={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",msTransition:"MSTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionEnd"};for(x in w){if(w.hasOwnProperty(x)&&f.is(v.style[x])){return w[x]}}});if(!r.matchesSelector){n.matchesSelector=j(r,"matchesSelector")}document.exitFullscreen=j(document,"exitFullscreen")||j(document,"cancelFullScreen")||function(){throw new Error("Element#requestFullscreen is not available in this platform")};if(!("fullscreenEnabled" in document)){document.fullscreenEnabled=j(document,"fullscreenEnabled")}(function(){var x="fullscreenElement",v=j(document,x,true)||j(document,"fullScreenElement",true)||j(document,"currentFullScreenElement",true);if(v&&v!==x){try{n.addEvent.call(document,"fullscreenchange",function(){document[x]=document[v]});document[x]=document[v]}catch(w){}}}());function i(){if(window.document){if(window.document.body){f.extendElement(window.document.body)}if(window.document.documentElement){f.extendElement(window.document.documentElement)}}}i();u.onDomReady(i);return f.namespace("Element",n,f,true)});